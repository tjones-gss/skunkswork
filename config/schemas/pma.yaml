# PMA (Precision Metalforming Association) Extraction Schema
# District member-list pages at /{district}/member-list.asp
#
# Actual DOM structure (verified 2026-02-07):
#   Each company is wrapped in its own <ul class="icons row-fluid">
#   with a single <li class="span4"> child:
#
#   <ul class="icons row-fluid">
#     <li class="span4">
#       <i class="icon-chevron-right red"></i>
#       <a href="/directory/profile.asp?id=XXXXXXXX">Company Name</a>
#       &nbsp; <span>|</span> &nbsp;
#       <cite>City, ST</cite>
#     </li>
#   </ul>

pma:
  extends: default

  # Each member is in its own <ul>, so we search the whole page for list items
  list_container: "body"
  list_item: "ul.icons.row-fluid li.span4"

  company_name:
    selectors:
      - "a[href*='profile.asp']"
      - "a[href*='directory']"
      - "a"
    required: true

  # District list pages don't contain company websites â€” override default
  # to prevent profile.asp links from being captured as website URLs.
  website:
    selectors:
      - "a[href*='http']:not([href*='pma.org'])"

  city:
    selectors:
      - "cite"
    parser: "pma_city"

  state:
    selectors:
      - "cite"
    parser: "pma_state"

  profile_url:
    selectors:
      - "a[href*='profile.asp']"
    extract: "href"

  member_id:
    selectors:
      - "a[href*='profile.asp']"
    extract: "href"
    parser: "pma_member_id"
